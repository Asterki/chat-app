(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{6027:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/main/home",function(){return c(8512)}])},6565:function(a,b,c){"use strict";var d=c(5893);c(7294);var e=c(2692),f=c(682),g=c(5498),h=c(8714),i=c(4731),j=c(575),k=c.n(j),l=function(a){return null==a.user?(0,d.jsx)(e.Z,{className:k().component,sticky:"top",collapseOnSelect:!0,variant:"dark",expand:"lg",children:(0,d.jsxs)(f.Z,{children:[(0,d.jsx)(e.Z.Brand,{children:(0,d.jsxs)(e.Z.Brand,{href:"/",children:[(0,d.jsx)("img",{alt:"",src:"/logo.svg",width:"30",height:"30",className:"d-inline-block align-top"})," ",(0,d.jsx)("b",{children:"DIMLIM"})]})}),(0,d.jsx)(e.Z.Toggle,{}),(0,d.jsx)(e.Z.Collapse,{className:"justify-content-end",children:(0,d.jsxs)(g.Z,{children:[(0,d.jsx)(g.Z.Link,{className:k().link,href:"/login",children:a.lang.login}),(0,d.jsx)(g.Z.Link,{className:k().link,href:"/register",children:a.lang.register}),(0,d.jsx)(g.Z.Link,{className:k().link,href:"/about",children:a.lang.about}),(0,d.jsx)(g.Z.Link,{className:k().link,href:"/support",children:a.lang.support}),(0,d.jsx)(g.Z.Link,{className:k().link,href:"/download",children:a.lang.download})]})})]})}):(0,d.jsx)(e.Z,{className:k().component,sticky:"top",collapseOnSelect:!0,expand:"lg",children:(0,d.jsxs)(f.Z,{children:[(0,d.jsx)(e.Z.Brand,{children:(0,d.jsxs)(e.Z.Brand,{href:"/home",children:[(0,d.jsx)("img",{alt:"",src:"/logo.svg",width:"30",height:"30",className:"d-inline-block align-top"})," ",(0,d.jsx)("b",{children:"DIMLIM"})]})}),(0,d.jsx)(g.Z,{children:(0,d.jsxs)(h.Z,{children:[(0,d.jsxs)(h.Z.Toggle,{variant:"none",className:"shadow-none",id:"dropdown-basic",children:[(0,d.jsx)(i.Z,{src:""==a.user.avatar?"":"/avatars/".concat(a.user.avatar),sx:{width:30,height:30}}),(0,d.jsx)("p",{children:(0,d.jsx)("b",{children:a.user.username})})]}),(0,d.jsxs)(h.Z.Menu,{variant:"dark",className:"container ".concat(k().dropdown),align:"end",children:[(0,d.jsx)(h.Z.Item,{href:"/settings",children:a.lang.settings}),(0,d.jsx)(h.Z.Divider,{}),(0,d.jsx)(h.Z.Item,{href:"/api/accounts/logout",className:k().logout,children:a.lang.logout})]})]})})]})})};b.Z=l},8512:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return L},default:function(){return M}});var d=c(7568),e=c(828),f=c(4051),g=c.n(f),h=c(5893),i=c(7294),j=c(9669),k=c.n(j),l=c(3264),m=c(9008),n=c.n(m),o=c(6565),p=c(682),q=c(1608),r=c(1555),s=c(5670),t=c(6466),u=c(5050),v=c(4731),w=c(562),x=c(2621),y=c(7745),z=c(6779),A=c(5084),B=c(1953),C=c(8661),D=c(8175),E=(0,D.Z)((0,h.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"}),"DoDisturbOn"),F=(0,D.Z)((0,h.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),G=(0,D.Z)((0,h.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"}),"Chat"),H=(0,D.Z)((0,h.jsx)("path",{d:"M17 11v2h-1.17l4.51 4.51C21.39 15.93 22 14.04 22 12c0-5.52-4.48-10-10-10-2.04 0-3.93.61-5.51 1.66L13.83 11H17zM1.39 4.22l2.27 2.27C2.61 8.07 2 9.96 2 12c0 5.52 4.48 10 10 10 2.04 0 3.93-.61 5.51-1.66l2.27 2.27 1.41-1.41L2.81 2.81 1.39 4.22zM7 11h1.17l2 2H7v-2z"}),"DoDisturbOff"),I=c(1936),J=c.n(I),K=function(a){var b,c=(0,e.Z)(i.useState("1"),2),f=c[0],j=c[1],m=(0,e.Z)(i.useState(!1),2),D=m[0],I=m[1],K=(0,e.Z)(i.useState(""),2),L=K[0],M=K[1],N=(0,e.Z)(i.useState(!1),2),O=N[0],P=N[1],Q=(0,l.io)(a.host);i.useEffect(function(){Q.on("connect",function(){Q.emit("join-home-page-listener",a.user.userID),Q.on("reload",function(a){return P(!0)})})});var R,S,T,U=(b=(0,d.Z)(g().mark(function b(c){var d,e;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=document.querySelector("#dialog-username-username").value){b.next=3;break}return b.abrupt("return",M(a.lang.dialogs.addContact["missing-parameters"]));case 3:if(d.toLowerCase()!=a.user.username){b.next=5;break}return b.abrupt("return",M(a.lang.dialogs.addContact["self-add"]));case 5:if(!(void 0!==a.user.contacts.find(function(a){return a.username.toLowerCase()==d.toLowerCase()}))){b.next=7;break}return b.abrupt("return",M(a.lang.dialogs.addContact["already-on-list"]));case 7:return b.next=9,k()({method:"post",url:"".concat(a.host,"/api/users/add-contact"),data:{contact:d}});case 9:if(500!=(e=b.sent).data.code){b.next=12;break}return b.abrupt("return",window.location.href="/error?id=".concat(e.data.id));case 12:if("success"!=e.data.message){b.next=16;break}return b.abrupt("return",window.location.reload());case 16:M(a.lang.dialogs.addContact[e.data.message]);case 17:case"end":return b.stop()}},b)})),function(a){return b.apply(this,arguments)}),V=(R=(0,d.Z)(g().mark(function b(c,d){var e;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,k()({method:"post",url:"".concat(a.host,"/api/users/block-contact"),data:{contact:d}});case 2:if(500!=(e=b.sent).data.code){b.next=5;break}return b.abrupt("return",window.location.href="/error?id=".concat(e.data.id));case 5:if("success"!=e.data.message){b.next=7;break}return b.abrupt("return",window.location.reload());case 7:case"end":return b.stop()}},b)})),function(a,b){return R.apply(this,arguments)}),W=(S=(0,d.Z)(g().mark(function b(c,d){var e;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,k()({method:"post",url:"".concat(a.host,"/api/users/remove-contact"),data:{contact:d}});case 2:if(500!=(e=b.sent).data.code){b.next=5;break}return b.abrupt("return",window.location.href="/error?id=".concat(e.data.id));case 5:if("success"!=e.data.message){b.next=7;break}return b.abrupt("return",window.location.reload());case 7:case"end":return b.stop()}},b)})),function(a,b){return S.apply(this,arguments)}),X=(T=(0,d.Z)(g().mark(function b(c,d){var e;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,k()({method:"post",url:"".concat(a.host,"/api/users/unblock-contact"),data:{contact:d}});case 2:if(500!=(e=b.sent).data.code){b.next=5;break}return b.abrupt("return",window.location.href="/error?id=".concat(e.data.id));case 5:if("success"!=e.data.message){b.next=7;break}return b.abrupt("return",window.location.reload());case 7:case"end":return b.stop()}},b)})),function(a,b){return T.apply(this,arguments)}),Y=a.user.contacts.map(function(a){return(0,h.jsxs)("div",{children:[(0,h.jsx)(p.Z,{fluid:!0,className:J().contact,children:(0,h.jsxs)(q.Z,{children:[(0,h.jsxs)(r.Z,{className:J()["contact-info"],children:[(0,h.jsx)(v.Z,{src:"/avatars/".concat(a.userID,".png")}),(0,h.jsx)("div",{className:J()["contact-general"],children:(0,h.jsx)("p",{className:J()["contact-username"],children:a.username})})]}),(0,h.jsxs)(r.Z,{className:J()["actions-icon"],children:[(0,h.jsx)(w.Z,{onClick:function(b){return V(b,a.username)},children:(0,h.jsx)(E,{})}),(0,h.jsx)(w.Z,{onClick:function(b){return W(b,a.username)},children:(0,h.jsx)(F,{})}),(0,h.jsx)(w.Z,{onClick:function(b){return window.location.href="/chat/".concat(a.username,"?id=").concat(a.userID)},children:(0,h.jsx)(G,{})})]})]})}),(0,h.jsx)("br",{})]},a.username)}),Z=a.user.blockedContacts.map(function(a){return(0,h.jsxs)("div",{children:[(0,h.jsx)(p.Z,{fluid:!0,className:J().contact,children:(0,h.jsxs)(q.Z,{children:[(0,h.jsxs)(r.Z,{className:J()["contact-info"],children:[(0,h.jsx)(v.Z,{src:"/avatars/".concat(a.userID,".png")}),(0,h.jsx)("div",{className:J()["contact-general"],children:(0,h.jsx)("p",{className:J()["contact-username"],children:a.username})})]}),(0,h.jsx)(r.Z,{className:J()["actions-icon"],children:(0,h.jsx)(w.Z,{onClick:function(b){return X(b,a.username)},children:(0,h.jsx)(H,{})})})]})}),(0,h.jsx)("br",{})]},a.username)});return i.useEffect(function(){if(!0==O)return window.location.reload()},[O]),(0,h.jsxs)("div",{className:J().page,children:[(0,h.jsx)(o.Z,{lang:a.lang.navbar,user:a.user}),(0,h.jsx)(n(),{children:(0,h.jsx)("title",{children:a.lang.pageTitle})}),(0,h.jsx)(x.Z,{open:D,className:J()["dialog-container"],sx:{backgroundColor:"none"},children:(0,h.jsxs)(p.Z,{fluid:!0,className:J().dialog,children:[(0,h.jsx)(y.Z,{children:a.lang.dialogs.addContact.title}),(0,h.jsx)("p",{className:J()["dialog-label"],children:(0,h.jsx)("b",{children:a.lang.dialogs.addContact.label})}),(0,h.jsx)("input",{id:"dialog-username-username",type:"text"}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("p",{className:J().error,children:L}),(0,h.jsxs)(z.Z,{children:[(0,h.jsx)(A.Z,{onClick:function(a){I(!1)},children:a.lang.dialogs.addContact.cancel}),(0,h.jsx)(A.Z,{onClick:U,children:a.lang.dialogs.addContact.add})]})]})}),(0,h.jsx)("div",{className:J()["main-content"],children:(0,h.jsxs)(s.ZP,{value:f,children:[(0,h.jsx)(B.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,h.jsxs)(t.Z,{onChange:function(a,b){j(b)},variant:"fullWidth",children:[(0,h.jsx)(C.Z,{className:J().tab,label:a.lang.contacts,value:"1"}),(0,h.jsx)(C.Z,{className:J().tab,label:a.lang.blocked,value:"2"})]})}),(0,h.jsxs)(u.Z,{value:"1",children:[(0,h.jsx)(A.Z,{variant:"contained",onClick:function(){return I(!0)},className:J()["add-contact-button"],children:a.lang.addContact}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),0==a.user.contacts.length&&(0,h.jsx)(p.Z,{fluid:!0,className:J()["no-contacts"],children:(0,h.jsx)("p",{children:a.lang.noContacts})}),0!==a.user.contacts.length&&(0,h.jsx)(p.Z,{fluid:!0,className:J().contacts,children:Y})]}),(0,h.jsxs)(u.Z,{value:"2",children:[(0,h.jsx)("br",{}),0==a.user.blockedContacts.length&&(0,h.jsx)(p.Z,{fluid:!0,className:J()["no-contacts"],children:(0,h.jsx)("p",{children:a.lang.noBlockedContacts})}),0!==a.user.blockedContacts.length&&(0,h.jsxs)(p.Z,{fluid:!0,className:J().contacts,children:[(0,h.jsx)("h2",{children:a.lang.blockedContacts}),(0,h.jsx)("br",{}),Z]})]})]})})]})},L=!0,M=K},575:function(a){a.exports={component:"navbar_component__HTrk1",link:"navbar_link__Zx_vV",dropdown:"navbar_dropdown__JINtx",logout:"navbar_logout__GVGqY"}},1936:function(a){a.exports={page:"home_page__5In93","no-contacts":"home_no-contacts__vVwL4","main-content":"home_main-content__bXZLI",tab:"home_tab__7S23e","add-contact-button":"home_add-contact-button__slRPj",contacts:"home_contacts__bLWji",contact:"home_contact__iyk3_","contact-info":"home_contact-info__UWi3h","contact-general":"home_contact-general__zuOLZ","contact-username":"home_contact-username__3rILA","actions-icon":"home_actions-icon__Lo6aU","dialog-container":"home_dialog-container__Mbd76",dialog:"home_dialog__YEkvc","dialog-label":"home_dialog-label__ERsJs",error:"home_error__lwaRa"}}},function(a){a.O(0,[277,406,612,161,488,716,837,774,888,179],function(){var b;return a(a.s=6027)}),_N_E=a.O()}])